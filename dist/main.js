!function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){},function(t,e,n){"use strict";function a(){tripCount>0&&(document.getElementById("btn-clear").style.display="initial"),tripCount--;const t=document.getElementById("tripList"),e=document.createElement("div"),n=document.createElement("div"),a=document.createElement("div"),o=document.createElement("img"),i=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div");e.setAttribute("class","card"),n.setAttribute("class","card-top"),a.setAttribute("class","card-img"),o.setAttribute("src",localStorage.getItem(tripCount).split(",")[localStorage.getItem(tripCount).split(",").length-1]),o.setAttribute("alt","image of location"),i.setAttribute("class","card-info"),r.setAttribute("class","card-weather");const c=document.getElementById("date").min,s=new Date(c),d=(new Date(localStorage.getItem(tripCount).split(",")[2]).getTime()-s.getTime())/864e5+1;if(i.innerHTML=`<p> My Escape to: ${localStorage.getItem(tripCount).split(",")[3]}, ${localStorage.getItem(tripCount).split(",")[4]} </p>`,i.innerHTML+=`<p> Departing: ${localStorage.getItem(tripCount).split(",")[2]} </p>`,i.innerHTML+=`<p> Your escape is ${d} days away</p>`,d<=7){l.setAttribute("class","weather-list"),r.innerHTML="<h4> 7 day forecast </h4>";const t=localStorage.getItem(tripCount).split(",").slice(5,26);for(let e=0;e<21;e+=3){const n=document.createElement("div");n.setAttribute("class","forecast"),n.innerHTML=`<img src="https://www.weatherbit.io/static/img/icons/${t[e]}.png" alt="weather icon">`,n.innerHTML+=`<p>H - ${t[e+1]}</p>`,n.innerHTML+=`<p>L - ${t[e+2]}</p>`,l.appendChild(n)}}else r.innerHTML="<h4> Typical weather for then: </h4>",l.setAttribute("class","weather-history"),l.innerHTML=`<p> Average temp of ${localStorage.getItem(tripCount).split(",")[5]} with a likely weather of ${localStorage.getItem(tripCount).split(",")[6]} </p> `;a.appendChild(o),n.appendChild(a),n.appendChild(i),r.appendChild(l),e.appendChild(n),e.appendChild(r),t.appendChild(e),tripCount++}n.r(e),n.d(e,"handleSubmit",(function(){return u})),n.d(e,"handleDate",(function(){return d})),n.d(e,"setDate",(function(){return p})),n.d(e,"clearLocalData",(function(){return g})),n.d(e,"tripList",(function(){return a})),n.d(e,"addToLocalStorageArray",(function(){return m.addToLocalStorageArray}));const o="42ae3f3d6c05424e9b64eaad82e0c8c7";function i(){localStorage.getItem("tripCount")>0&&(document.getElementById("btn-clear").style.display="initial");const t=document.getElementById("tripList"),e=document.createElement("div"),n=document.createElement("div"),a=document.createElement("div"),o=document.createElement("img"),i=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div");e.setAttribute("class","card"),n.setAttribute("class","card-top"),a.setAttribute("class","card-img"),o.setAttribute("src",localStorage.getItem(tripCount).split(",")[localStorage.getItem(tripCount).split(",").length-1]),o.setAttribute("alt","image of location"),i.setAttribute("class","card-info"),r.setAttribute("class","card-weather");const c=document.getElementById("date").min,s=new Date(c),d=(new Date(localStorage.getItem(tripCount).split(",")[2]).getTime()-s.getTime())/864e5+1;if(i.innerHTML=`<p> My Escape to: ${localStorage.getItem(tripCount).split(",")[3]}, ${localStorage.getItem(tripCount).split(",")[4]} </p>`,i.innerHTML+=`<p> Departing: ${localStorage.getItem(tripCount).split(",")[2]} </p>`,i.innerHTML+=`<p> Your escape is ${d} days away</p>`,d<=7){l.setAttribute("class","weather-list"),r.innerHTML="<h4> 7 day forecast </h4>";const t=localStorage.getItem(tripCount).split(",").slice(5,26);for(let e=0;e<21;e+=3){const n=document.createElement("div");n.setAttribute("class","forecast"),n.innerHTML=`<img src="https://www.weatherbit.io/static/img/icons/${t[e]}.png" alt="weather icon">`,n.innerHTML+=`<p>H - ${t[e+1]}</p>`,n.innerHTML+=`<p>L - ${t[e+2]}</p>`,l.appendChild(n)}}else r.innerHTML="<h4> Typical weather for then: </h4>",l.setAttribute("class","weather-history"),l.innerHTML=`<p> Average temp of ${localStorage.getItem(tripCount).split(",")[5]} with a likely weather of ${localStorage.getItem(tripCount).split(",")[6]} </p> `;a.appendChild(o),n.appendChild(a),n.appendChild(i),r.appendChild(l),e.appendChild(n),e.appendChild(r),t.appendChild(e),tripCount++}function r(t,e){var n=localStorage.getItem(t);(n=n?n.split(","):[]).push(e),localStorage.setItem(t,n.toString())}const l=async t=>{console.log(t);const e=await fetch("http://api.geonames.org/searchJSON?q="+t+"&maxRows=1&username=camcoder");try{const t=await e.json();return"US"==t.geonames[0].countryCode?r(tripCount,[t.geonames[0].toponymName,t.geonames[0].adminName1]):r(tripCount,[t.geonames[0].toponymName,t.geonames[0].countryName]),t}catch(t){console.log(t)}},c=async(t,e)=>{const n=localStorage.getItem(tripCount).split(",")[1],a=new Date(n),i=new Date(a);i.setDate(a.getDate()+2);let l=i.getFullYear();if(l=i.getMonth()+1<10?l+"-0"+(i.getMonth()+1):l+"-"+(i.getMonth()+1),l=i.getDate()+1<10?l+"-0"+i.getDate():l+"-"+i.getDate(),localStorage.getItem(tripCount).split(",")[0]<=7){const n=await fetch("https://api.weatherbit.io/v2.0/forecast/daily?lat="+t+"&lon="+e+"&units=I&days=7&key="+o);try{const t=await n.json();for(let e=0;e<7;e++)r(tripCount,[t.data[e].weather.icon,t.data[e].high_temp,t.data[e].low_temp])}catch(t){console.log(t)}}else{const a=await fetch("https://api.weatherbit.io/v2.0/history/hourly?lat="+t+"&lon="+e+"&units=I&start_date="+n+"&end_date="+l+"&tz=local&key="+o);try{const t=await a.json();r(tripCount,[t.data[7].temp,t.data[7].weather.description])}catch(t){console.log(t)}}},s=async(t,e)=>{const n=await fetch("https://pixabay.com/api/?key=22240298-415423148879f96b44082537c&q="+t+"+"+e+"+city&image_type=photo");try{const t=await n.json();localStorage.setItem("tripCount",tripCount),r(tripCount++,t.hits[0].webformatURL)}catch(t){console.log(t)}};function d(t){const e=document.getElementById("date").min,n=t,a=new Date(e),o=new Date(n),i=(o.getTime()-a.getTime())/864e5+1;let l=o.getFullYear()-1;l=o.getMonth()+1<10?l+"-0"+(o.getMonth()+1):l+"-"+(o.getMonth()+1),l=o.getDate()+1<10?l+"-0"+(o.getDate()+1):l+"-"+(o.getDate()+1),localStorage.setItem(tripCount,[i]),r(tripCount,[l]),r(tripCount,[n])}function u(t){t.preventDefault()}function p(){let t=new Date,e=t.getFullYear();e=t.getMonth()+1<10?e+"-0"+(t.getMonth()+1):e+"-"+(t.getMonth()+1),e=t.getDate()+1<10?e+"-0"+(t.getDate()+1):e+"-"+(t.getDate()+1),document.getElementById("date").min=e}document.getElementById("submit").addEventListener("click",(function(){if(""==document.getElementById("destination").value||""==document.getElementById("date").value)""==document.getElementById("destination").value&&""==document.getElementById("date").value?alert("Please fill out form"):""==document.getElementById("date").value?alert("Enter a valid date"):""==document.getElementById("destination").value&&alert("Enter a destination");else{const t=document.getElementById("destination").value;d(document.getElementById("date").value),function(t){l(t).then((async function(t){return await c(t.geonames[0].lat,t.geonames[0].lng),t})).then((async function(t){return"US"==t.geonames[0].countryCode?await s(t.geonames[0].name,t.geonames[0].adminName1):await s(t.geonames[0].name,t.geonames[0].countryName),t})).then((function(t){a()}))}(t),document.getElementById("destination").value="",document.getElementById("date").value=""}}));var m=n(0);function g(t){t.preventDefault()}document.getElementById("btn-clear").addEventListener("click",(function(){localStorage.clear(),location.reload()})),window.tripCount=1,p();for(let t=0;t<localStorage.getItem("tripCount");t++)i();localStorage.getItem("tripCount")>0?document.getElementById("btn-clear").style.display="initial":document.getElementById("btn-clear").style.display="none"}]);